# Results

```{r table-narrative, results='asis'}

# Fake narrative text (~250 words)
narrative_text <- paste(
  rep("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ", 10),
  collapse = " "
)

# --- Main data table (7 cols) ---
df <- data.frame(
  Resolution       = c("SMU", "Other"),
  Name             = c("WCVI Chinook", "Conuma River"),
  `Avg Run/Avg Spawners` = c("-", "50,000"),
  `LRP/LBB`        = c("-", "n/a"),
  `Mgmt Target`    = c("Maximum escapement: 40,000", "10,000"),
  `Prelim Forecast`= c("-", "58,000"),
  `Outlook Category` = c("1", "4"),
  check.names = FALSE, stringsAsFactors = FALSE
)

ft <- flextable(df) %>%
  theme_vanilla() %>%
  bold(part = "header") %>%
  color(part = "header", color = "black") %>%
  bg(part = "header", bg = "grey90") %>%
  border_remove() %>%
  border_outer(border = officer::fp_border(color = "black", width = 1)) %>%
  border_inner_h(border = officer::fp_border(color = "black", width = 0.5)) %>%
  border_inner_v(border = officer::fp_border(color = "black", width = 0.5)) %>%
  autofit() %>%
  set_table_properties(layout = "autofit", width = 1)



# --- Add top block values (plain text row) ---
ft <- add_header_row(
  x = ft,
  values = c("WCVI Chinook (includes 3 CUs)", narrative_text),
  colwidths = c(1, 6)
)

ft <- bold(ft, i = 1, part = "header", bold = FALSE)
ft <- bg(ft, i = 1, part = "header", bg = "white")

# --- Add top row (SMU / Narrative) ---
ft <- add_header_row(
  x = ft,
  values = c("SMU", "Narrative"),
  colwidths = c(1, 6)
)
ft <- bold(ft, i = 1, part = "header", bold = TRUE)
ft <- bg(ft, i = 1, part = "header", bg = "grey90")
ft <- color(ft, i = 1, part = "header", color = "black")

ft

```

```{r setup2, include=FALSE}
library(flextable)
library(glue)
load("ftSMU.RData")

```

```{r tab}
#ft2 <- ft_list[[1]]$table
#ft2
```

```{r setup3, include=FALSE}
# Assume ft_list is already created
areas <- c("Fraser and Interior", "North Coast", "South Coast", "Yukon Transboundary")
species_list <- c("Chum", "Chinook", "Coho", "Pink-Even", "Sockeye Lake-Type", "Sockeye River-Type")


```

## Fraser and Interior Area

### Chum

### Chinook

### Coho

### Pink-Even

### Sockeye Lake-Type

### Sockeye River-Type

## North Coast Area

### Chum

### Chinook

### Coho

### Pink-Even

### Sockeye Lake-Type

### Sockeye River-Type

## South Coast Area

### Chum

```{r tab:render_all_smu_tables, echo=FALSE}
species <- "Chum Salmon"
area <- "North Coast"
year <- 2025

caption_text <- paste0(
  "Table X. Summary of status metrics informing the annual status evaluation for ",
  species, " in the ", area, " during the ", year, " management cycle. ",
  "Values are presented for each stock management unit (SMU), and where applicable, for associated singular conservation units (CUs), CU aggregations, and Hatchery or Indicator stocks. ",
  "Reported values include recent average run size or spawner abundance, biological reference points (limit reference point [LRP] and lower biological benchmark [LBB]), and management (mgmt.) targets or operational control points used to interpret current conditions. ",
  "The forecast provides a numerical abundance estimate for the return year, while the outlook indicates the categorical status classification (see definitions in Table 1)."
)

ftSMU <- set_caption(ftSMU, caption = caption_text)
ftSMU


```





### Chinook

### Coho

### Pink-Even

### Sockeye Lake-Type

### Sockeye River-Type

## Yukon Transboundary

### Chum

### Chinook

### Coho

### Pink-Even

### Sockeye Lake-Type

### Sockeye River-Type
